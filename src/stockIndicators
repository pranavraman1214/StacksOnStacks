from alpha_vantage.techindicators import TechIndicators
import smtplib, ssl

def getEMA50(symb):
    whatever = None
    while whatever is None:
        try:
            ti = TechIndicators(key='KU7YQYX4LFOFNQTU', output_format='pandas')
            data, metadata = ti.get_ema(symbol=symb, interval='1min', time_period='50', series_type='close')
            whatever = data
            return float(data.iloc[data.shape[0] - 1])
        except KeyError:
            pass


def getEMA200(symb):
    whatever = None
    while whatever is None:
        try:
            ti = TechIndicators(key='KU7YQYX4LFOFNQTU', output_format='pandas')
            data, metadata = ti.get_ema(symbol=symb, interval='1min', time_period='200', series_type='close')
            whatever = data
            return float(data.iloc[data.shape[0] - 1])
        except KeyError:
            pass


sender_email = "ryoheinamiki515@gmail.com"
receiver_email = "rnamiki2@illinois.edu"
message = "hello world"
port = 465  # For SSL
password = input("Type your password and press enter: ")

# Create a secure SSL context
context = ssl.create_default_context()


with smtplib.SMTP_SSL("smtp.gmail.com", port, context=context) as server:
    server.connect()
    server.login("ryoheinamiki515@gmail.com", password)

server.sendmail(sender_email, receiver_email, message)




